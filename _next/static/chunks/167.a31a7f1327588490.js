"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[167],{5471:function(e,t,n){n.d(t,{Z:function(){return MDX_Card}});var r=n(7294),o=n(3235),a=(0,n(2854).zo)("div",{paddingBottom:"$gr4",zIndex:"1","@md":{paddingBottom:"$gr3"},"@xs":{paddingBottom:"$gr2"}});n(6803),n(2794),n(3981);var i=n(633),l=n(5893),MDX_Card=function(e){var t=e.iiifContent,n=e.label,c=(0,r.useState)(),s=c[0],u=c[1];return((0,r.useEffect)(function(){if(t){var e=i.find(function(e){return e.id===t});e&&u({id:t,type:"Manifest",label:n||e.label,thumbnail:e.thumbnail,homepage:[{id:"/works/".concat(e.slug),label:e.label,type:"Text"}]})}},[t,n,i]),s)?(0,l.jsx)(a,{"data-testid":"mdx-card",children:(0,l.jsx)(o.Z,{resource:s})}):null}},6858:function(e,t,n){n.r(t),n.d(t,{default:function(){return Map_Map}}),n(9369),n(9429),n(3656);var r=n(3245),o=n(5715),a=n(9635),i=n(2013),l=n(5996),c=n(577),s=n(2604),u=n(2469),p=n(7294),d=n(5471),h=(0,n(2854).zo)("div",{height:"100vh",width:"100%",position:"fixed",zIndex:"0",top:"0",".map-container":{height:"100%",width:"100%",backgroundColor:"var(--gray-1)",figure:{width:"100%",margin:"0",padding:"0"}},".leafletPopupContentWrapper":{backgroundColor:"var(--gray-2)"},".leafletPopupContent":{margin:0},".leafletPopupTip":{backgroundColor:"var(--accent-a10)"},".canopyMapPopup":{width:"240px",img:{maxHeight:"100% !important"}},figure:{img:{width:"100%",maxHeight:"200px"},video:{display:"none"}}}),f=n(9499),g=n(7191);n(5732);var b=n(5243),m=n.n(b),v=n(8806);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,f.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var createClusterCustomIcon=function(e){var t=e.getChildCount();return m().divIcon({className:"canopy-map-cluster-group-icon",html:'<button data-accent-color="" data-radius="full" style="box-shadow: var(--shadow-3); cursor: pointer; outline-style: none; background-color: #500000;" class="rt-reset rt-BaseButton rt-r-size-3 rt-variant-solid rt-IconButton"><span class="rt-Text rt-r-size-4 rt-r-weight-bold">'.concat(t,"</span></button>"),iconSize:m().point(40,40,!0),iconAnchor:[20,40],popupAnchor:[0,-40]})},y=(0,v.Au)(function(e,t){(0,g.Z)(e);var n=m().markerClusterGroup({iconCreateFunction:createClusterCustomIcon,polygonOptions:{fillColor:"#732F2f",color:"#732F2f",weight:2,opacity:1}});return{instance:n,context:_objectSpread(_objectSpread({},t),{},{layerContainer:n})}}),x=n(7459),j=n(5049),getLabel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";if(!e)return["Untitled"];if("string"==typeof e)return[e];if(!e[t]){var n=Object.getOwnPropertyNames(e);if(n.length>0)return e[n[0]]}return e[t]},w=n(5893),C={defaultBounds:[[51.505,-.09]],tileLayers:[{name:"OpenStreetMap",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}]},Map_Map=function(e){var t=e.manifests,n=(0,p.useState)(C.tileLayers[0]),f=n[0],g=n[1],b=C.defaultBounds,v=(0,p.useRef)(null),O=(0,p.useState)(b),k=O[0],S=O[1];return(0,p.useEffect)(function(){var e=(0,x.z)(t);e.length>0&&S(e)},[t]),(0,p.useEffect)(function(){v.current&&k&&v.current.fitBounds(k)},[v,k]),(0,w.jsxs)(h,{css:{top:j.J9,height:"calc(100vh - ".concat(j.J9,"px)")},children:[(0,w.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n    .leaflet-popup {\n      width: 240px;\n    }\n    \n    .leaflet-popup-content-wrapper {\n      background-color: var(--gray-2);\n      overflow: hidden;\n      border: none;\n    }\n\n    .leaflet-popup-content {\n      margin: 0;\n\n      img {\n        max-height: 100% !important;\n      }\n    }\n\n    .leaflet-popup-tip {\n      background-color: var(--accent-a10);\n      opacity: 0.2;\n    }\n\n\n    .leaflet-control {\n      background-color: var(--accent-10);\n    }\n\n    .leaflet-bar a {\n      background-color: var(--accent-10);\n      color: var(--gray-12);\n      fill: var(--gray-12);\n    }\n\n    .leaflet-control-layers {\n      display: none;\n    }\n\n    html {\n      overflow: hidden;\n    }\n\n    html.dark .leaflet-layer { \n      filter: invert(100%) hue-rotate(180deg) brightness(90%) contrast(90%);\n    }\n  "}}),(0,w.jsxs)(o.h,{className:"map-container",bounds:k,scrollWheelZoom:!0,zoomControl:!1,ref:v,children:[(0,w.jsx)(r.Box,{style:{position:"absolute",zIndex:1e3,top:0,right:0,padding:"var(--space-5)"},children:(0,w.jsxs)(r.Flex,{gap:"4",children:[C.tileLayers.length>1&&(0,w.jsxs)(r.Select.Root,{defaultValue:f.name,onValueChange:function(e){var t=C.tileLayers.find(function(t){return t.name===e});t&&g(t)},size:"3",children:[(0,w.jsx)(r.Select.Trigger,{style:{boxShadow:"var(--shadow-3)",background:"var(--gray-1)"}}),(0,w.jsx)(r.Select.Content,{children:(0,w.jsxs)(r.Select.Group,{children:[(0,w.jsx)(r.Select.Label,{children:"Layers"}),C.tileLayers.map(function(e,t){return(0,w.jsx)(r.Select.Item,{value:e.name,children:e.name},t)})]})})]}),(0,w.jsxs)(r.Flex,{direction:"column",gap:"2",children:[(0,w.jsx)(r.IconButton,{"aria-label":"zoom in",size:"3",onClick:function(){var e;return null===(e=v.current)||void 0===e?void 0:e.zoomIn()},style:{boxShadow:"var(--shadow-3)",cursor:"pointer",backgroundColor:"#500000"},children:(0,w.jsx)(u.pOD,{})}),(0,w.jsx)(r.IconButton,{"aria-label":"zoom out",size:"3",onClick:function(){var e;return null===(e=v.current)||void 0===e?void 0:e.zoomOut()},style:{boxShadow:"var(--shadow-3)",cursor:"pointer",backgroundColor:"#500000"},children:(0,w.jsx)(u.V_R,{})})]})]})}),(0,w.jsx)(a.et,{position:"bottomright",children:(0,w.jsx)(a.et.BaseLayer,{name:f.name,checked:!0,children:(0,w.jsx)(i.I,{url:f.url,attribution:f.attribution})})}),(0,w.jsx)(y,{children:(0,w.jsx)(l.$,{children:t.map(function(e){return e.features.map(function(t,n){var r,o,a,i;return(0,w.jsx)(c.J,{position:[t.geometry.coordinates[1],t.geometry.coordinates[0]],icon:(a=e.thumbnail[0].id,i=getLabel(null==t?void 0:null===(r=t.properties)||void 0===r?void 0:r.label),m().divIcon({className:"canopy-map-marker-icon",html:'<button data-accent-color="" data-radius="full" style="box-shadow: var(--shadow-3); cursor: pointer; outline-style: none;" class="rt-reset rt-BaseButton rt-r-size-2 rt-variant-solid rt-IconButton"><img src="'.concat(a,'" alt="').concat(i,'" style="height: 100%; width: 100%; border-radius: 50%; object-fit: cover;" /></button>').toString(),iconSize:m().point(32,32,!0),iconAnchor:[16,32],popupAnchor:[0,-32]})),children:(0,w.jsx)(s.G,{className:"canopy-map-popup",children:(0,w.jsx)(d.Z,{iiifContent:e.id,label:getLabel(null==t?void 0:null===(o=t.properties)||void 0===o?void 0:o.label)})})},n)})})})})]})]})}}}]);